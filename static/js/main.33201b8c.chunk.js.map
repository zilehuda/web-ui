{"version":3,"sources":["data lazy /^/.//route_.*_segments/.json$/ groupOptions: {} namespace object","data lazy /^/.//route_.*_stations/.json$/ groupOptions: {} namespace object","components/error-boundary.tsx","client.ts","use-positions.ts","components/user-location.component.tsx","shared/geo-position.hook.ts","the-map.tsx","components/navigation-bar.component.tsx","components/hud-buttons.component.tsx","data/routes.ts","components/route-select.dialog.tsx","serviceWorker.ts","i18n.ts","shared/fixes.ts","index.tsx","app.component.tsx","shared/document-title.hook.ts","icons/neutral-human.svg"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","ErrorBoundary","state","hasError","error","console","log","this","props","children","React","Component","data","login","passcode","host","stomp","transport","transportEx","station","Client","client","over","Sock","debug","heartbeat","subscription","undefined","subscriptionEx","reject","connect","callback","subscribe","unsubscribe","disconnect","Positions","positions","frame","pos","routingKeyPieces","headers","destination","split","trackerId","length","JSON","parse","body","board","lat","parseFloat","latitude","lng","lon","longitude","direction","dir","speed","getPositionFromFrame","oldDirection","directionDelta","Math","abs","setState","userIcon","Icon","iconUrl","personIcon","iconSize","UserLocation","positionOptions","useState","position","setPosition","setError","useEffect","listener","navigator","geolocation","watchPosition","clearWatch","useGeoPosition","coords","Marker","icon","TheMap","selectedRoutes","showUserLocation","isAnimatedMarker","setIsAnimatedMarker","routesSegments","setRoutesSegments","routesStations","setRoutesStations","forEach","routeId","routeSegments","rs","default","catch","routeStations","size","useRoutesData","center","zoom","viewport","Map","style","height","zoomControl","onzoomstart","onzoomend","TileLayer","attribution","url","values","p","key","title","divIcon","className","html","entries","has","GeoJSON","iconAnchor","color","weight","fillColor","fillOpacity","onEachFeature","feature","layer","bindPopup","properties","tags","name","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","NavigationBarComponent","useTranslation","classes","AppBar","Toolbar","IconButton","edge","aria-label","Typography","variant","hudButtons","zIndex","appBar","right","bottom","topIcon","marginBottom","HudButtons","isOpenRouteSelect","setIsOpenRouteSelect","setShowUserLocation","Tooltip","placement","Fab","onClick","routes","sort","a","b","name_concise","localeCompare","numeric","Transition","forwardRef","ref","Slide","RouteSelectDialog","isOpen","setOpen","setSelectedRoutes","useTheme","fullScreen","useMediaQuery","breakpoints","down","l10n","Dialog","open","onClose","TransitionComponent","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","r","Button","id_upstream","delete","add","Boolean","window","location","hostname","match","resources","en","translation","ro","ru","i18n","use","initReactI18next","init","keySeparator","interpolation","escapeValue","L","prototype","options","shadowUrl","iconShadow","createMuiTheme","ReactDOM","render","fallback","ThemeProvider","document","Set","Fragment","CssBaseline","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.33201b8c.chunk.js","sourcesContent":["var map = {\n\t\"./route_1_segments.json\": [\n\t\t171,\n\t\t1\n\t],\n\t\"./route_2_segments.json\": [\n\t\t172,\n\t\t3\n\t],\n\t\"./route_38_segments.json\": [\n\t\t173,\n\t\t5\n\t],\n\t\"./route_39_segments.json\": [\n\t\t174,\n\t\t7\n\t],\n\t\"./route_3_segments.json\": [\n\t\t175,\n\t\t9\n\t],\n\t\"./route_40_segments.json\": [\n\t\t176,\n\t\t11\n\t],\n\t\"./route_41_segments.json\": [\n\t\t177,\n\t\t13\n\t],\n\t\"./route_42_segments.json\": [\n\t\t178,\n\t\t15\n\t],\n\t\"./route_44_segments.json\": [\n\t\t179,\n\t\t17\n\t],\n\t\"./route_45_segments.json\": [\n\t\t180,\n\t\t19\n\t],\n\t\"./route_46_segments.json\": [\n\t\t181,\n\t\t21\n\t],\n\t\"./route_47_segments.json\": [\n\t\t182,\n\t\t23\n\t],\n\t\"./route_48_segments.json\": [\n\t\t183,\n\t\t25\n\t],\n\t\"./route_49_segments.json\": [\n\t\t184,\n\t\t27\n\t],\n\t\"./route_4_segments.json\": [\n\t\t185,\n\t\t29\n\t],\n\t\"./route_52_segments.json\": [\n\t\t186,\n\t\t31\n\t],\n\t\"./route_53_segments.json\": [\n\t\t187,\n\t\t33\n\t],\n\t\"./route_54_segments.json\": [\n\t\t188,\n\t\t35\n\t],\n\t\"./route_55_segments.json\": [\n\t\t189,\n\t\t37\n\t],\n\t\"./route_56_segments.json\": [\n\t\t190,\n\t\t39\n\t],\n\t\"./route_57_segments.json\": [\n\t\t191,\n\t\t41\n\t],\n\t\"./route_58_segments.json\": [\n\t\t192,\n\t\t43\n\t],\n\t\"./route_59_segments.json\": [\n\t\t193,\n\t\t45\n\t],\n\t\"./route_5_segments.json\": [\n\t\t194,\n\t\t47\n\t],\n\t\"./route_60_segments.json\": [\n\t\t195,\n\t\t49\n\t],\n\t\"./route_61_segments.json\": [\n\t\t196,\n\t\t51\n\t],\n\t\"./route_62_segments.json\": [\n\t\t197,\n\t\t53\n\t],\n\t\"./route_64_segments.json\": [\n\t\t198,\n\t\t55\n\t],\n\t\"./route_65_segments.json\": [\n\t\t199,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 161;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./route_1_stations.json\": [\n\t\t200,\n\t\t2\n\t],\n\t\"./route_2_stations.json\": [\n\t\t201,\n\t\t4\n\t],\n\t\"./route_38_stations.json\": [\n\t\t202,\n\t\t6\n\t],\n\t\"./route_39_stations.json\": [\n\t\t203,\n\t\t8\n\t],\n\t\"./route_3_stations.json\": [\n\t\t204,\n\t\t10\n\t],\n\t\"./route_40_stations.json\": [\n\t\t205,\n\t\t12\n\t],\n\t\"./route_41_stations.json\": [\n\t\t206,\n\t\t14\n\t],\n\t\"./route_42_stations.json\": [\n\t\t207,\n\t\t16\n\t],\n\t\"./route_44_stations.json\": [\n\t\t208,\n\t\t18\n\t],\n\t\"./route_45_stations.json\": [\n\t\t209,\n\t\t20\n\t],\n\t\"./route_46_stations.json\": [\n\t\t210,\n\t\t22\n\t],\n\t\"./route_47_stations.json\": [\n\t\t211,\n\t\t24\n\t],\n\t\"./route_48_stations.json\": [\n\t\t212,\n\t\t26\n\t],\n\t\"./route_49_stations.json\": [\n\t\t213,\n\t\t28\n\t],\n\t\"./route_4_stations.json\": [\n\t\t214,\n\t\t30\n\t],\n\t\"./route_52_stations.json\": [\n\t\t215,\n\t\t32\n\t],\n\t\"./route_53_stations.json\": [\n\t\t216,\n\t\t34\n\t],\n\t\"./route_54_stations.json\": [\n\t\t217,\n\t\t36\n\t],\n\t\"./route_55_stations.json\": [\n\t\t218,\n\t\t38\n\t],\n\t\"./route_56_stations.json\": [\n\t\t219,\n\t\t40\n\t],\n\t\"./route_57_stations.json\": [\n\t\t220,\n\t\t42\n\t],\n\t\"./route_58_stations.json\": [\n\t\t221,\n\t\t44\n\t],\n\t\"./route_59_stations.json\": [\n\t\t222,\n\t\t46\n\t],\n\t\"./route_5_stations.json\": [\n\t\t223,\n\t\t48\n\t],\n\t\"./route_60_stations.json\": [\n\t\t224,\n\t\t50\n\t],\n\t\"./route_61_stations.json\": [\n\t\t225,\n\t\t52\n\t],\n\t\"./route_62_stations.json\": [\n\t\t226,\n\t\t54\n\t],\n\t\"./route_64_stations.json\": [\n\t\t227,\n\t\t56\n\t],\n\t\"./route_65_stations.json\": [\n\t\t228,\n\t\t58\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 162;\nmodule.exports = webpackAsyncContext;","import { default as React } from 'react'\n\nexport class ErrorBoundary extends React.Component {\n  state = { hasError: false }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true }\n  }\n\n  componentDidCatch(error) {\n    console.log(error)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return null\n    }\n\n    return this.props.children\n  }\n}\n","import { over, Subscription } from 'webstomp-client'\nimport Sock from 'sockjs-client'\n\nconst data = {\n  login: 'public_rtec',\n  passcode: 'iWillHackItInVisualBasic',\n  host: 'nazar',\n  stomp: 'https://rtec.dekart.com/webstomp',\n  transport: '/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/state.transport.*',\n  // There are 2 sources of data, the \"Extended\" one has more trackers and will\n  // keep growing, while the classic one has ~10 and will most likely stay that way\n  transportEx:\n    '/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/telemetry.transport.*',\n  station: '/exchange/e_public_rtec_Sho0ohCiephoh2waeM9t/state.station.*',\n}\n\nexport class Client {\n  client = over(new Sock(data.stomp), { debug: false, heartbeat: false })\n  subscription?: Subscription = undefined\n  subscriptionEx?: Subscription = undefined\n\n  connect() {\n    return new Promise((resolve, reject) => {\n      this.client!.connect(\n        data.login,\n        data.passcode,\n        resolve,\n        reject,\n        data.host,\n      )\n    })\n  }\n\n  subscribe(callback) {\n    this.subscription = this.client.subscribe(data.transport, callback)\n    this.subscriptionEx = this.client.subscribe(data.transportEx, callback)\n  }\n\n  unsubscribe() {\n    this.subscription!.unsubscribe()\n    this.subscriptionEx!.unsubscribe()\n  }\n\n  disconnect() {\n    this.client.disconnect()\n  }\n}\n","import { default as React } from 'react'\nimport { Client } from './client'\n\nexport class Positions extends React.Component<any> {\n  state = {\n    positions: {},\n  }\n\n  client?: Client = undefined\n\n  componentDidMount() {\n    this.client = new Client()\n    this.client.connect().then(() => {\n      this.client!.subscribe(this.callback)\n    })\n  }\n\n  componentWillUnmount() {\n    this.client!.unsubscribe()\n    this.client!.disconnect()\n  }\n\n  callback = frame => {\n    let pos = getPositionFromFrame(frame)\n\n    // if this vehicle has a previously known state, we perform a\n    // few additional checks, to improve the rendering of the bus-icon orientations\n    if (pos.board in this.state.positions) {\n      const oldDirection = this.state.positions[pos.board].direction\n      const directionDelta = pos.direction - oldDirection\n\n      if (pos.speed === 0) {\n        // Not moving, its direction is often reported as 0, which is probably\n        // not right (unless it moves due North); so we'll keep the previous\n        // value of `direction` instead. If it does go straight North, then\n        // oldDirection will be 0, so we shall render it correctly.\n        pos.direction = oldDirection\n      } else if (pos.speed > 0 && Math.abs(directionDelta) > 30) {\n        // It is moving, but the delta between the current direction and the\n        // old one is above 30 degrees, which is probably too sharp of a turn,\n        // so most likely it is a noisy reading from the GPS tracker. Thus,\n        // we turn it half-way, to make it look smoother.\n        // 30 degrees was chosen empirically.\n        pos.direction -= directionDelta / 2\n      }\n    }\n\n    this.setState({\n      positions: {\n        ...this.state.positions,\n        [pos.board]: pos,\n      },\n    })\n  }\n\n  render() {\n    const children: any = this.props.children\n    return children(this.state.positions)\n  }\n}\n\nfunction getPositionFromFrame(frame) {\n  // Messages are coming from 2 different systems (see note in clients.ts about\n  // routing keys), each system sends a slightly different JSON, the keys are,\n  // old one: dir, lat, lon, board\n  // new one: direction, latitude, longitude ('board' is absent)\n  // To homogenize them, we try both keys, and we extract the ID of the tracker\n  // itself from the routing key header, as a substitude for `board`\n\n  // The routing key looks like `/exchange/e_rtec_mqtt_bridge/telemetry.transport.000001`\n  // or `/exchange/e_rtec_mqtt_bridge/state.transport.013`\n  // The last piece is the ID of the tracker that sent the telemetry\n  let routingKeyPieces = frame.headers.destination.split('.')\n  const trackerId: string = routingKeyPieces[routingKeyPieces.length - 1]\n\n  const data = JSON.parse(frame.body)\n  const board = data.board || trackerId\n  const lat = parseFloat(data.lat || data.latitude)\n  const lng = parseFloat(data.lon || data.longitude)\n  const direction = parseFloat(data.direction || data.dir)\n\n  // NOTE: contrary to what we know so far, that the\n  // direction is a bearing (i.e., North is up at 0,\n  // South is down at 270, etc.), it seems to already\n  // be an angle in a cartesian plane, so the conversion\n  // below is not necessary.\n  // direction = (-direction + 90) % 360\n\n  const speed = data.speed\n  return { board, lat, lng, direction, speed }\n}\n","import React from 'react'\nimport { Marker } from 'react-leaflet'\nimport { Icon } from 'leaflet'\nimport { useGeoPosition } from '../shared/geo-position.hook'\nimport personIcon from '../icons/neutral-human.svg'\n\nconst userIcon = new Icon({\n  iconUrl: personIcon,\n  iconSize: [40, 40],\n})\n\nexport function UserLocation() {\n  const [position, error] = useGeoPosition()\n\n  /**\n   * Future improvements, Handle error case\n   * ex: when user denies location, maybe ask to hide the button\n   */\n  if (!position || error) {\n    return null\n  }\n\n  const { coords } = position\n\n  return (\n    <Marker position={[coords.latitude, coords.longitude]} icon={userIcon} />\n  )\n}\n","import { useState, useEffect } from 'react'\n\nexport function useGeoPosition(\n  positionOptions?: PositionOptions,\n): [Position | undefined, PositionError | undefined] {\n  const [position, setPosition] = useState<Position | undefined>(undefined)\n  const [error, setError] = useState<PositionError | undefined>(undefined)\n\n  useEffect(() => {\n    const listener = navigator.geolocation.watchPosition(\n      setPosition,\n      setError,\n      positionOptions,\n    )\n\n    return () => navigator.geolocation.clearWatch(listener)\n  }, [positionOptions])\n\n  return [position, error]\n}\n","import React from 'react'\nimport { Map, TileLayer, Viewport, Marker, GeoJSON } from 'react-leaflet'\nimport { GeoJsonObject } from 'geojson'\nimport { divIcon } from 'leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport { ErrorBoundary } from './components/error-boundary'\nimport './style.css'\nimport { Positions } from './use-positions'\nimport { UserLocation } from './components/user-location.component'\n\ntype Props = {\n  selectedRoutes: Set<string>\n  showUserLocation: boolean\n}\n\nexport function TheMap({ selectedRoutes, showUserLocation }: Props) {\n  const [isAnimatedMarker, setIsAnimatedMarker] = React.useState(true)\n  const { routesSegments, routesStations } = useRoutesData(selectedRoutes)\n  const [viewport] = React.useState<Viewport>({\n    center: [47.0229, 28.8353],\n    zoom: 13,\n  })\n\n  return (\n    <Map\n      id={'roata-way-hai-hai'}\n      style={{ height: '100vh' }}\n      zoomControl={false}\n      onzoomstart={() => setIsAnimatedMarker(false)}\n      onzoomend={() => setIsAnimatedMarker(true)}\n      viewport={viewport}>\n      <TileLayer\n        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n\n      {showUserLocation && <UserLocation />}\n\n      <Positions>\n        {positions =>\n          Object.values(positions).map((p: any) => (\n            <Marker\n              key={p.board}\n              title={p.board}\n              position={p}\n              // To show an oriented marker, we have to work around a limitation\n              // of `react-leaflet`. There is no straightforward way of rotating\n              // the marker, so we overcome this by wrapping it in an invisible\n              // container, and then adding another HTML element inside, which\n              // will use the `arrow` class with a `transform: rotate`.\n              icon={divIcon({\n                className: `arrow-container ${\n                  isAnimatedMarker ? 'animated-marker' : ''\n                }`,\n                html: `<div class=\"arrow\" style=\"transform: rotate(${p.direction}deg)\"></div>`,\n              })}\n            />\n          ))\n        }\n      </Positions>\n\n      {Object.entries(routesSegments).map(([id, rs]) =>\n        selectedRoutes.has(id) ? (\n          <ErrorBoundary key={`route-segments-${id}`}>\n            <GeoJSON data={rs!} />\n          </ErrorBoundary>\n        ) : (\n          undefined\n        ),\n      )}\n\n      {Object.entries(routesStations).map(([id, rs]) =>\n        selectedRoutes.has(id) ? (\n          <ErrorBoundary key={`route-stations-${id}`}>\n            <GeoJSON\n              key={`route-stations-${id}`}\n              data={rs!}\n              style={() => ({\n                title: 'uniqueTitleqwe',\n                iconSize: [25, 41],\n                iconAnchor: [12, 41],\n                color: '#00FF00',\n                weight: 0.9,\n                fillColor: '#1a1d62',\n                fillOpacity: 1,\n              })}\n              onEachFeature={(feature, layer) => {\n                // TODO consider using `name:ru` to load the Russian label,\n                // depending on the user-agent's language setting (if the\n                // translation string is available in the JSON)\n                layer.bindPopup(feature.properties.tags.name)\n              }}\n            />\n          </ErrorBoundary>\n        ) : (\n          undefined\n        ),\n      )}\n    </Map>\n  )\n}\n\ntype RoutesState = {\n  [key: string]: GeoJsonObject\n}\n\nfunction useRoutesData(selectedRoutes) {\n  const [routesSegments, setRoutesSegments] = React.useState<RoutesState>({})\n  const [routesStations, setRoutesStations] = React.useState<RoutesState>({})\n\n  React.useEffect(\n    function() {\n      selectedRoutes.forEach((routeId: string) => {\n        if (!routesSegments[routeId]) {\n          import(\n            /* webpackChunkName: \"[request]\" */\n            `./data/route_${routeId}_segments.json`\n          )\n            .then(routeSegments =>\n              setRoutesSegments(rs => ({\n                ...rs,\n                [routeId]: routeSegments.default,\n              })),\n            )\n            .catch(console.log)\n        }\n\n        if (!routesStations[routeId]) {\n          import(\n            /* webpackChunkName: \"[request]\" */\n            `./data/route_${routeId}_stations.json`\n          )\n            .then(routeStations =>\n              setRoutesStations(rs => ({\n                ...rs,\n                [routeId]: routeStations.default,\n              })),\n            )\n            .catch(console.log)\n        }\n      })\n    },\n    [routesSegments, routesStations, selectedRoutes, selectedRoutes.size],\n  )\n\n  return { routesSegments, routesStations }\n}\n","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core'\nimport { useTranslation } from 'react-i18next'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}))\n\nexport function NavigationBarComponent() {\n  const { t } = useTranslation()\n  const classes = useStyles()\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar>\n        <IconButton\n          edge=\"start\"\n          className={classes.menuButton}\n          color=\"inherit\"\n          aria-label=\"menu\">\n          <MenuIcon />\n        </IconButton>\n        <Typography variant=\"h6\" className={classes.title}>\n          {t('label.title')}\n        </Typography>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import { default as React } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport Fab from '@material-ui/core/Fab'\nimport DirectionsBus from '@material-ui/icons/DirectionsBus'\nimport LocationCity from '@material-ui/icons/MyLocation'\nimport { makeStyles, Tooltip } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n  hudButtons: {\n    position: 'absolute',\n    zIndex: theme.zIndex.appBar,\n    right: theme.spacing(1),\n    bottom: theme.spacing(1),\n  },\n  topIcon: {\n    marginBottom: theme.spacing(1),\n  },\n}))\n\nexport function HudButtons(props) {\n  const { isOpenRouteSelect, setIsOpenRouteSelect, setShowUserLocation } = props\n  const { t } = useTranslation()\n  const classes = useStyles()\n\n  return (\n    <div className={classes.hudButtons}>\n      {'geolocation' in navigator && (\n        <Tooltip title={t('label.myLocation')} placement=\"left\">\n          <Fab\n            color=\"secondary\"\n            aria-label={t('label.myLocation')}\n            className={classes.topIcon}\n            onClick={() => setShowUserLocation(true)}>\n            <LocationCity />\n          </Fab>\n        </Tooltip>\n      )}\n      <br />\n      <Tooltip title={t('label.pickRoute')} placement=\"left\">\n        <Fab\n          color=\"secondary\"\n          aria-label={t('label.pickRoute')}\n          onClick={() => setIsOpenRouteSelect(!isOpenRouteSelect)}>\n          <DirectionsBus />\n        </Fab>\n      </Tooltip>\n    </div>\n  )\n}\n","import { csvLoader } from '../shared/csv.macro'\n\n// see src/data/routes.csv structure\ntype Route = {\n  id_upstream: string\n  name_concise: string\n  name_long: string\n  osm_relation: string\n}\n\nexport const routes: Route[] = csvLoader<Route>('./routes.csv').sort((a, b) =>\n  a.name_concise.localeCompare(b.name_concise, undefined, {\n    numeric: true,\n  }),\n)\n","import React from 'react'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Slide from '@material-ui/core/Slide'\nimport { TransitionProps } from '@material-ui/core/transitions'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport { useTranslation } from 'react-i18next'\nimport { routes } from '../data/routes'\nimport { useTheme } from '@material-ui/styles'\nimport { Theme } from '@material-ui/core/styles'\n\nconst Transition = React.forwardRef(function(props: TransitionProps, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />\n})\n\ntype Props = {\n  isOpen: boolean\n  setOpen: (isOpen: boolean) => void\n  setSelectedRoutes: (selectedRoutes: Set<string>) => void\n  selectedRoutes: Set<string>\n}\n\nexport function RouteSelectDialog(props: Props) {\n  const { isOpen, setOpen, setSelectedRoutes, selectedRoutes } = props\n  const theme = useTheme<Theme>()\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'))\n  const [l10n] = useTranslation()\n\n  function selectRoute(id: string) {\n    if (selectedRoutes.has(id)) {\n      selectedRoutes.delete(id)\n    } else {\n      selectedRoutes.add(id)\n    }\n    setSelectedRoutes(selectedRoutes)\n    setOpen(false)\n  }\n\n  return (\n    <Dialog\n      open={isOpen}\n      fullScreen={fullScreen}\n      onClose={() => setOpen(false)}\n      TransitionComponent={Transition}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\">\n      <DialogTitle id=\"alert-dialog-title\">\n        {l10n('explanation.pickRoute')}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {routes.map(r => (\n            <Button\n              onClick={() => selectRoute(r.id_upstream)}\n              color=\"secondary\"\n              variant={selectedRoutes.has(r.id_upstream) ? 'outlined' : 'text'}\n              key={r.id_upstream}>\n              {r.name_concise}\n            </Button>\n          ))}\n        </DialogContentText>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    )\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n/* eslint-enable */\n","import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\n\nimport en from './l10n/en.json'\nimport ro from './l10n/ro.json'\nimport ru from './l10n/ru.json'\n\nconst resources = {\n  en: { translation: en },\n  ro: { translation: ro },\n  ru: { translation: ru },\n}\n\n/**\n * Infer translation keys\n */\nexport type TranslateKeys = keyof typeof en\n\ni18n.use(initReactI18next).init({\n  resources,\n  /**\n   * Changing language will be added in a future PR\n   */\n  lng: 'en',\n  /**\n   * Use flat keys in l10n files, nested objects not allowed\n   * TypeScript will help with keys inference\n   */\n  keySeparator: false,\n  interpolation: {\n    escapeValue: false, // not needed for react\n  },\n})\n\nexport { i18n }\n","import L from 'leaflet'\nimport icon from 'leaflet/dist/images/marker-icon.png'\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png'\n\n// Applying the workaround, otherwise station markers are not rendered\n// https://github.com/Leaflet/Leaflet/issues/4968#issuecomment-264311098\n// This seems to be a known issue, and other workarounds failed, e.g.:\n// https://github.com/PaulLeCam/react-leaflet/issues/453#issuecomment-410450387\nL.Marker.prototype.options.icon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n})\n","import * as React from 'react'\nimport ReactDOM from 'react-dom'\nimport { I18nextProvider } from 'react-i18next'\nimport { AppComponent } from './app.component'\nimport * as serviceWorker from './serviceWorker'\nimport { i18n } from './i18n'\nimport { createMuiTheme } from '@material-ui/core/styles'\nimport { ThemeProvider } from '@material-ui/styles'\nimport './shared/fixes'\n\nconst theme = createMuiTheme()\n\nconsole.log('Starting v0.0.2')\nReactDOM.render(\n  <React.StrictMode>\n    <React.Suspense fallback={null}>\n      <I18nextProvider i18n={i18n}>\n        <ThemeProvider theme={theme}>\n          <AppComponent />\n        </ThemeProvider>\n      </I18nextProvider>\n    </React.Suspense>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister() // eslint-disable-line\n","import { default as React, useState } from 'react'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { TheMap } from './the-map'\nimport { NavigationBarComponent } from './components/navigation-bar.component'\nimport { useTranslation } from 'react-i18next'\nimport { HudButtons } from './components/hud-buttons.component'\nimport { RouteSelectDialog } from './components/route-select.dialog'\nimport { useDocumentTitle } from './shared/document-title.hook'\n\nexport function AppComponent() {\n  const { t } = useTranslation()\n  useDocumentTitle(t('label.title'))\n  const [isOpenRouteSelect, setIsOpenRouteSelect] = useState(false)\n  // Maybe keep it in local storage?\n  const [showUserLocation, setShowUserLocation] = useState(false)\n  const [selectedRoutes, setSelectedRoutes] = useState<Set<string>>(new Set())\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n\n      <NavigationBarComponent />\n\n      <HudButtons\n        isOpenRouteSelect={isOpenRouteSelect}\n        setIsOpenRouteSelect={setIsOpenRouteSelect}\n        setShowUserLocation={setShowUserLocation}\n      />\n\n      <RouteSelectDialog\n        isOpen={isOpenRouteSelect}\n        setOpen={setIsOpenRouteSelect}\n        selectedRoutes={selectedRoutes}\n        setSelectedRoutes={setSelectedRoutes}\n      />\n\n      <TheMap\n        selectedRoutes={selectedRoutes}\n        showUserLocation={showUserLocation}\n      />\n    </React.Fragment>\n  )\n}\n","import { useEffect } from 'react'\n\nexport function useDocumentTitle(title: string) {\n  useEffect(\n    function() {\n      document.title = title\n    },\n    [title],\n  )\n}\n","module.exports = __webpack_public_path__ + \"static/media/neutral-human.67afdfae.svg\";"],"sourceRoot":""}